<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Nonlinear programs · JuMP</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44252521-1', 'auto');
ga('send', 'pageview', {'page': location.pathname + location.search + location.hash});
</script><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuMP logo"/></a><div class="docs-package-name"><span class="docs-autofit">JuMP</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../installation/">Installation Guide</a></li><li><a class="tocitem" href="../../quickstart/">Quick Start Guide</a></li><li><a class="tocitem" href="../../variables/">Variables</a></li><li><a class="tocitem" href="../../expressions/">Expressions</a></li><li><a class="tocitem" href="../../objective/">Objectives</a></li><li><a class="tocitem" href="../../constraints/">Constraints</a></li><li><a class="tocitem" href="../../containers/">Containers</a></li><li><a class="tocitem" href="../../solvers/">Interacting with solvers</a></li><li><a class="tocitem" href="../../solutions/">Querying Solutions</a></li><li><a class="tocitem" href="../../nlp/">Nonlinear Modeling</a></li><li><a class="tocitem" href="../../callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../extensions/">Extensions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/callbacks/">Callback API</a></li><li><a class="tocitem" href="../../reference/constraints/">Constraint API</a></li><li><a class="tocitem" href="../../reference/containers/">Containers API</a></li><li><a class="tocitem" href="../../reference/expressions/">Expression API</a></li><li><a class="tocitem" href="../../reference/models/">Model API</a></li><li><a class="tocitem" href="../../reference/moi/">MathOptInterface API</a></li><li><a class="tocitem" href="../../reference/nonlinear/">Nonlinear API</a></li><li><a class="tocitem" href="../../reference/objectives/">Objective API</a></li><li><a class="tocitem" href="../../reference/solutions/">Solution API</a></li><li><a class="tocitem" href="../../reference/variables/">Variable API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../basic/">A basic example</a></li><li><a class="tocitem" href="../callbacks/">Callbacks</a></li><li><a class="tocitem" href="../cutting_stock_column_generation/">Cutting stock column generation</a></li><li><a class="tocitem" href="../mixed-integer-linear-programs/">Mixed-integer linear programs</a></li><li><a class="tocitem" href="../nlp_tricks/">Nonlinear tips and tricks</a></li><li class="is-active"><a class="tocitem" href>Nonlinear programs</a><ul class="internal"><li><a class="tocitem" href="#The-Rosenbrock-function"><span>The Rosenbrock function</span></a></li><li><a class="tocitem" href="#Maximum-likelihood-estimation"><span>Maximum likelihood estimation</span></a></li><li><a class="tocitem" href="#The-clnlbeam-problem"><span>The clnlbeam problem</span></a></li></ul></li><li><a class="tocitem" href="../quadratic-programs/">Quadratic programs</a></li><li><a class="tocitem" href="../semi-definite-programs/">Semi-definite programs</a></li></ul></li><li><a class="tocitem" href="../../style/">Style Guide</a></li><li><a class="tocitem" href="../../roadmap/">Development Roadmap</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Nonlinear programs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Nonlinear programs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jump-dev/JuMP.jl/blob/master/docs/src/examples/nonlinear-programs.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Nonlinear-programs"><a class="docs-heading-anchor" href="#Nonlinear-programs">Nonlinear programs</a><a id="Nonlinear-programs-1"></a><a class="docs-heading-anchor-permalink" href="#Nonlinear-programs" title="Permalink"></a></h1><p>These examples use the following packages:</p><pre><code class="language-julia">using JuMP
import Ipopt
import Random
import Statistics
import Test</code></pre><h2 id="The-Rosenbrock-function"><a class="docs-heading-anchor" href="#The-Rosenbrock-function">The Rosenbrock function</a><a id="The-Rosenbrock-function-1"></a><a class="docs-heading-anchor-permalink" href="#The-Rosenbrock-function" title="Permalink"></a></h2><p>A nonlinear example of the classical Rosenbrock function.</p><pre><code class="language-julia">function example_rosenbrock()
    model = Model(Ipopt.Optimizer)
    set_silent(model)
    @variable(model, x)
    @variable(model, y)
    @NLobjective(model, Min, (1 - x)^2 + 100 * (y - x^2)^2)
    optimize!(model)

    Test.@test termination_status(model) == MOI.LOCALLY_SOLVED
    Test.@test primal_status(model) == MOI.FEASIBLE_POINT
    Test.@test objective_value(model) ≈ 0.0 atol = 1e-10
    Test.@test value(x) ≈ 1.0
    Test.@test value(y) ≈ 1.0
    return
end

example_rosenbrock()</code></pre><h2 id="Maximum-likelihood-estimation"><a class="docs-heading-anchor" href="#Maximum-likelihood-estimation">Maximum likelihood estimation</a><a id="Maximum-likelihood-estimation-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-likelihood-estimation" title="Permalink"></a></h2><p>Use nonlinear optimization to compute the maximum likelihood estimate (MLE) of the parameters of a normal distribution, a.k.a., the sample mean and variance.</p><pre><code class="language-julia">function example_mle(; verbose = true)
    n = 1_000
    Random.seed!(1234)
    data = randn(n)
    model = Model(Ipopt.Optimizer)
    set_silent(model)
    @variable(model, μ, start = 0.0)
    @variable(model, σ &gt;= 0.0, start = 1.0)
    @NLobjective(
        model,
        Max,
        n / 2 * log(1 / (2 * π * σ^2)) - sum((data[i] - μ)^2 for i = 1:n) / (2 * σ^2)
    )
    optimize!(model)
    if verbose
        println(&quot;μ             = &quot;, value(μ))
        println(&quot;mean(data)    = &quot;, Statistics.mean(data))
        println(&quot;σ^2           = &quot;, value(σ)^2)
        println(&quot;var(data)     = &quot;, Statistics.var(data))
        println(&quot;MLE objective = &quot;, objective_value(model))
    end
    Test.@test value(μ) ≈ Statistics.mean(data) atol = 1e-3
    Test.@test value(σ)^2 ≈ Statistics.var(data) atol = 1e-2
    # You can even do constrained MLE!
    @NLconstraint(model, μ == σ^2)
    optimize!(model)
    Test.@test value(μ) ≈ value(σ)^2
    if verbose
        println()
        println(&quot;With constraint μ == σ^2:&quot;)
        println(&quot;μ                         = &quot;, value(μ))
        println(&quot;σ^2                       = &quot;, value(σ)^2)
        println(&quot;Constrained MLE objective = &quot;, objective_value(model))
    end
    return
end

example_mle()</code></pre><pre class="documenter-example-output">μ             = -0.025342970228359348
mean(data)    = -0.02534297022835935
σ^2           = 1.0102260798354885
var(data)     = 1.0112373171501061
MLE objective = -1424.0256068162653

With constraint μ == σ^2:
μ                         = 0.622883941453663
σ^2                       = 0.622883941453663
Constrained MLE objective = -1830.4679112102974</pre><h2 id="The-clnlbeam-problem"><a class="docs-heading-anchor" href="#The-clnlbeam-problem">The clnlbeam problem</a><a id="The-clnlbeam-problem-1"></a><a class="docs-heading-anchor-permalink" href="#The-clnlbeam-problem" title="Permalink"></a></h2><p>Based on an AMPL model by Hande Y. Benson</p><p>Copyright (C) 2001 Princeton University All Rights Reserved</p><p>Permission to use, copy, modify, and distribute this software and its documentation for any purpose and without fee is hereby granted, provided that the above copyright notice appear in all copies and that the copyright notice and this permission notice appear in all supporting documentation.</p><p>Source: H. Maurer and H.D. Mittelman, &quot;The non-linear beam via optimal control with bound state variables&quot;, Optimal Control Applications and Methods 12, pp. 19-31, 1991.</p><pre><code class="language-julia">function example_clnlbeam()
    N = 1000
    h = 1/N
    alpha = 350
    model = Model(Ipopt.Optimizer)
    @variables(model, begin
           -1 &lt;= t[1:(N + 1)] &lt;= 1
        -0.05 &lt;= x[1:(N + 1)] &lt;= 0.05
                 u[1:(N + 1)]
    end)
    @NLobjective(
        model,
        Min,
        sum(
            0.5 * h * (u[i + 1]^2 + u[i]^2) +
            0.5 * alpha * h * (cos(t[i + 1]) + cos(t[i]))
            for i = 1:N
        ),
    )
    @NLconstraint(
        model,
        [i = 1:N],
        x[i + 1] - x[i] - 0.5 * h * (sin(t[i + 1]) + sin(t[i])) == 0,
    )
    @constraint(
        model,
        [i = 1:N],
        t[i + 1] - t[i] - 0.5 * h * u[i + 1] - 0.5 * h * u[i] == 0,
    )
    optimize!(model)
    println(&quot;&quot;&quot;
    termination_status = $(termination_status(model))
    primal_status      = $(primal_status(model))
    objective_value    = $(objective_value(model))
    &quot;&quot;&quot;)
    return
end

example_clnlbeam()</code></pre><pre class="documenter-example-output">This is Ipopt version 3.13.2, running with linear solver mumps.
NOTE: Other linear solvers might be more efficient (see Ipopt documentation).

Number of nonzeros in equality constraint Jacobian...:     8000
Number of nonzeros in inequality constraint Jacobian.:        0
Number of nonzeros in Lagrangian Hessian.............:     4002

Total number of variables............................:     3003
                     variables with only lower bounds:        0
                variables with lower and upper bounds:     2002
                     variables with only upper bounds:        0
Total number of equality constraints.................:     2000
Total number of inequality constraints...............:        0
        inequality constraints with only lower bounds:        0
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:        0

iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
   0  3.5000000e+02 0.00e+00 0.00e+00  -1.0 0.00e+00    -  0.00e+00 0.00e+00   0
   1  3.5000000e+02 0.00e+00 0.00e+00  -1.7 0.00e+00    -  1.00e+00 1.00e+00   0
   2  3.5000000e+02 0.00e+00 0.00e+00  -3.8 0.00e+00  -2.0 1.00e+00 1.00e+00T  0
   3  3.5000000e+02 0.00e+00 0.00e+00  -5.7 0.00e+00   0.2 1.00e+00 1.00e+00T  0
   4  3.5000000e+02 0.00e+00 0.00e+00  -8.6 0.00e+00  -0.2 1.00e+00 1.00e+00T  0

Number of Iterations....: 4

                                   (scaled)                 (unscaled)
Objective...............:   3.5000000000000318e+02    3.5000000000000318e+02
Dual infeasibility......:   0.0000000000000000e+00    0.0000000000000000e+00
Constraint violation....:   0.0000000000000000e+00    0.0000000000000000e+00
Complementarity.........:   2.5059035596802450e-09    2.5059035596802450e-09
Overall NLP error.......:   2.5059035596802450e-09    2.5059035596802450e-09


Number of objective function evaluations             = 5
Number of objective gradient evaluations             = 5
Number of equality constraint evaluations            = 5
Number of inequality constraint evaluations          = 0
Number of equality constraint Jacobian evaluations   = 5
Number of inequality constraint Jacobian evaluations = 0
Number of Lagrangian Hessian evaluations             = 4
Total CPU secs in IPOPT (w/o function evaluations)   =      0.122
Total CPU secs in NLP function evaluations           =      0.007

EXIT: Optimal Solution Found.
termination_status = LOCALLY_SOLVED
primal_status      = FEASIBLE_POINT
objective_value    = 350.0000000000032</pre><p><a href="https://github.com/jump-dev/JuMP.jl/blob/master/docs/src/examples/nonlinear-programs.jl">View this file on Github</a>.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../nlp_tricks/">« Nonlinear tips and tricks</a><a class="docs-footer-nextpage" href="../quadratic-programs/">Quadratic programs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 31 January 2021 23:38">Sunday 31 January 2021</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
